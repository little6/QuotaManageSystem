<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="Department" meta="x:300;y:165">
      <Property name="creationType">com.bstek.bdf2.core.model.DefaultDept</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="desc">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="companyId">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="User">
      <Property name="creationType">com.bstek.bdf2.core.model.DefaultUser</Property>
      <Property name="defaultDisplayProperty">cname</Property>
      <PropertyDef name="username">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="password">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="salt">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="cname">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="ename">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="male">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="enabled">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="administrator">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="birthday">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="mobile">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="address">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="email">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="companyId">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaType" meta="x:825;y:165">
      <Property name="creationType">com.quotamanagesys.model.QuotaType</Property>
      <Property name="autoCreatePropertyDefs">false</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="quotaProfession">
        <Property name="dataType">QuotaProfession</Property>
      </PropertyDef>
      <PropertyDef name="quotaLevel">
        <Property name="dataType">QuotaLevel</Property>
      </PropertyDef>
      <PropertyDef name="quotaDimension">
        <Property name="dataType">QuotaDimension</Property>
      </PropertyDef>
      <PropertyDef name="quotaUnit">
        <Property name="dataType">QuotaUnit</Property>
      </PropertyDef>
      <PropertyDef name="digit">
        <Property name="dataType">int</Property>
      </PropertyDef>
      <PropertyDef name="rate">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="manageDept">
        <Property name="dataType">Department</Property>
      </PropertyDef>
      <PropertyDef name="inUsed">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="calculationFormulaInfo">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="quotaDefinitionInfo">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaProfession" meta="x:375;y:30">
      <Property name="creationType">com.quotamanagesys.model.QuotaProfession</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaUnit" meta="x:630;y:60">
      <Property name="creationType">com.quotamanagesys.model.QuotaUnit</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaLevel" meta="x:120;y:360">
      <Property name="creationType">com.quotamanagesys.model.QuotaLevel</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="level">
        <Property name="dataType">int</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaDimension" meta="x:570;y:180">
      <Property name="creationType">com.quotamanagesys.model.QuotaDimension</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaCover" meta="x:945;y:44">
      <Property name="creationType">com.quotamanagesys.model.QuotaCover</Property>
      <Property name="defaultDisplayProperty">name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaItemViewMap">
      <Property name="creationType">com.quotamanagesys.model.QuotaItemViewMap</Property>
      <Property name="defaultDisplayProperty">quotaType.name</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="user">
        <Property name="dataType">User</Property>
      </PropertyDef>
      <PropertyDef name="quotaType">
        <Property name="dataType">QuotaType</Property>
      </PropertyDef>
      <PropertyDef name="quotaCover">
        <Property name="dataType">QuotaCover</Property>
      </PropertyDef>
      <PropertyDef name="canView">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="defaultView">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
    </DataType>
    <DataType name="QuotaItemCreator">
      <Property name="creationType">com.quotamanagesys.model.QuotaItemCreator</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="name">
        <Property name="dataType">String</Property>
        <Property name="submittable">true</Property>
      </PropertyDef>
      <PropertyDef name="quotaDutyDept">
        <Property name="dataType">Department</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="year">
        <Property name="dataType">int</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="quotaType">
        <Property name="dataType">QuotaType</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="quotaCover">
        <Property name="dataType">QuotaCover</Property>
        <Property name="required">true</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <DataSet id="dsDepartment">
      <Property name="dataType">[Department]</Property>
      <Property name="dataProvider">departmentDao#getAll</Property>
    </DataSet>
    <DataSet id="dsUser">
      <Property name="dataType">[User]</Property>
      <Property name="dataProvider">userDao#getUsersByDept</Property>
    </DataSet>
    <DataSet id="dsQuotaItemViewMap">
      <Property name="dataType">[QuotaItemViewMap]</Property>
      <Property name="dataProvider">quotaItemViewMapDao#getQuotaItemViewMapsByUserWithPage</Property>
      <Property name="pageSize">50</Property>
    </DataSet>
    <DataSet id="dsQuotaItemCreatorForSelect">
      <Property name="dataType">[QuotaItemCreator]</Property>
      <Property name="dataProvider">quotaItemViewMapDao#getQuotaItemCreatorsNotYetMapByUserWithPage</Property>
      <Property name="pageSize">50</Property>
    </DataSet>
    <Container>
      <SplitPanel>
        <Property name="position">340</Property>
        <MainControl>
          <Container>
            <ToolBar>
              <DataPilot>
                <ClientEvent name="onSubControlAction">var datas = view.get(&quot;#dsQuotaItemViewMap.data&quot;);&#xD;
var action = view.get(&quot;#uaQuotaItemViewMap&quot;);&#xD;
var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
var selection=dgQuotaItemViewMap.get(&quot;selection&quot;);&#xD;
var messge;&#xD;
&#xD;
switch (arg.code) {&#xD;
	case &quot;+&quot;:{&#xD;
		var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
		var currentUser=dgUser.getCurrentItem();&#xD;
		userId=currentUser.get(&quot;username&quot;);&#xD;
		&#xD;
		var dsQuotaItemCreatorForSelect=view.get(&quot;#dsQuotaItemCreatorForSelect&quot;);&#xD;
		dsQuotaItemCreatorForSelect.set(&quot;parameter&quot;,{userId:userId});&#xD;
 &#xD;
		//必须注意顺序，赋值语句间执行要有时间间隔。						&#xD;
		view.get(&quot;#dlgQuotaItemCreatorForSelect&quot;).show();&#xD;
		dsQuotaItemCreatorForSelect.flushAsync();&#xD;
		arg.processDefault=false;&#xD;
		break;&#xD;
	}&#xD;
}</ClientEvent>
                <Property name="itemCodes">+,pages,pageSize</Property>
                <Property name="dataSet">dsQuotaItemViewMap</Property>
              </DataPilot>
              <Separator/>
              <ToolBarButton>
                <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
var uaQuotaItemViewMap=view.get(&quot;#uaQuotaItemViewMap&quot;);&#xD;
&#xD;
uaQuotaItemViewMap.execute({&#xD;
	callback:function(success,obj){&#xD;
		if (success) {&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
			dgQuotaItemViewMap.refresh();&#xD;
		}else{&#xD;
			
		}&#xD;
	}&#xD;
})</ClientEvent>
                <Property name="caption">保存</Property>
                <Property name="icon">url(>skin>common/icons.gif) -140px -20px</Property>
              </ToolBarButton>
            </ToolBar>
            <DataGrid id="dgQuotaItemViewMap">
              <ClientEvent name="onContextMenu">var muUpdateViewMaps1=view.get(&quot;#muUpdateViewMaps1&quot;);&#xD;
muUpdateViewMaps1.show(&#xD;
	{&#xD;
		position:{&#xD;
			left:arg.event.pageX,&#xD;
			top:arg.event.pageY&#xD;
		}&#xD;
	}&#xD;
);</ClientEvent>
              <Property name="dataSet">dsQuotaItemViewMap</Property>
              <Property name="dataType">QuotaItemViewMap</Property>
              <Property name="dynaRowHeight">true</Property>
              <Property name="selectionMode">multiRows</Property>
              <Property name="stretchColumnsMode">off</Property>
              <Property name="filterMode">serverSide</Property>
              <RowNumColumn/>
              <IndicatorColumn/>
              <DataColumn name="id">
                <Property name="property">id</Property>
                <Property name="visible">false</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="user">
                <Property name="property">user</Property>
                <Property name="visible">false</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="quotaType">
                <Property name="property">quotaType</Property>
                <Property name="editable">false</Property>
                <Property name="wrappable">true</Property>
                <Property name="caption">指标种类</Property>
                <Property name="readOnly">true</Property>
                <Property name="width">220</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn>
                <Property name="property">quotaType.name</Property>
                <Property name="caption">指标</Property>
                <Property name="align">center</Property>
                <Property name="width">200</Property>
                <Property name="editable">true</Property>
                <Property name="name">quotaTypeName</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn>
                <Property name="name">quotaProfessionName</Property>
                <Property name="property">quotaType.quotaProfession.name</Property>
                <Property name="align">center</Property>
                <Property name="caption">专业</Property>
                <Property name="readOnly">true</Property>
                <Property name="width">100</Property>
                <Property name="editable">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn>
                <Property name="property">quotaType.manageDept.name</Property>
                <Property name="caption">管理部门</Property>
                <Property name="align">center</Property>
                <Property name="width">100</Property>
                <Property name="editable">true</Property>
                <Property name="name">manageDeptName</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn>
                <Property name="property">quotaType.quotaLevel.name</Property>
                <Property name="caption">级别</Property>
                <Property name="align">center</Property>
                <Property name="width">60</Property>
                <Property name="editable">true</Property>
                <Property name="name">quotaTypeLevelName</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn>
                <Property name="property">quotaType.rate</Property>
                <Property name="caption">频率</Property>
                <Property name="align">center</Property>
                <Property name="width">60</Property>
                <Property name="editable">true</Property>
                <Property name="name">rate</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn name="quotaCover">
                <Property name="property">quotaCover</Property>
                <Property name="editable">false</Property>
                <Property name="align">center</Property>
                <Property name="caption">口径</Property>
                <Property name="readOnly">true</Property>
                <Property name="width">65</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn>
                <Property name="property">quotaCover.name</Property>
                <Property name="caption">口径</Property>
                <Property name="align">center</Property>
                <Property name="width">65</Property>
                <Property name="name">quotaCoverName</Property>
                <Property name="editable">true</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
              <DataColumn name="canView">
                <Property name="property">canView</Property>
                <Property name="align">center</Property>
                <Property name="caption">可见</Property>
                <Property name="width">60</Property>
                <Property name="visible">true</Property>
                <Property name="readOnly">false</Property>
              </DataColumn>
              <DataColumn name="defaultView">
                <Property name="property">defaultView</Property>
                <Property name="align">center</Property>
                <Property name="caption">默认</Property>
                <Property name="width">60</Property>
              </DataColumn>
            </DataGrid>
            <UpdateAction id="uaQuotaItemViewMap">
              <Property name="dataResolver">quotaItemViewMapDao#saveQuotaItemViewMaps</Property>
              <UpdateItem>
                <Property name="dataSet">dsQuotaItemViewMap</Property>
              </UpdateItem>
            </UpdateAction>
            <Dialog id="dlgQuotaItemCreatorForSelect">
              <Property name="width">700</Property>
              <Property name="height">500</Property>
              <Buttons/>
              <Children>
                <Container>
                  <ToolBar>
                    <DataPilot>
                      <Property name="dataSet">dsQuotaItemCreatorForSelect</Property>
                      <Property name="itemCodes">pages</Property>
                    </DataPilot>
                    <ToolBarButton>
                      <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var user=dgUser.getCurrentItem();&#xD;
var userId=user.get(&quot;username&quot;);&#xD;
var dgQuotaItemCreatorForSelect=view.get(&quot;#dgQuotaItemCreatorForSelect&quot;);&#xD;
var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
var datas = dsQuotaItemViewMap.get(&quot;data&quot;);&#xD;
var selection=dgQuotaItemCreatorForSelect.get(&quot;selection&quot;);&#xD;
var messge;&#xD;
&#xD;
if (selection &amp;&amp; selection.length){&#xD;
	selection.each(function(data){&#xD;
		var isAdded=false;&#xD;
		datas.each(function(dataAdded){&#xD;
			if((dataAdded.get(&quot;quotaType&quot;).get(&quot;id&quot;)==data.get(&quot;quotaType&quot;).get(&quot;id&quot;))&#xD;
			&amp;&amp;(dataAdded.get(&quot;quotaCover&quot;).get(&quot;id&quot;)==data.get(&quot;quotaCover&quot;).get(&quot;id&quot;))){&#xD;
				isAdded=true;&#xD;
			}&#xD;
		});&#xD;
		if(isAdded==false){&#xD;
			var entity={user:user.toJSON(),quotaType:data.get(&quot;quotaType&quot;).toJSON(),quotaCover:data.get(&quot;quotaCover&quot;).toJSON(),canView:true,defaultView:false};&#xD;
			datas.insert(entity);&#xD;
		}&#xD;
	});&#xD;
	dgQuotaItemViewMap.refresh();&#xD;
	view.get(&quot;#dlgQuotaItemCreatorForSelect&quot;).hide();&#xD;
	&#xD;
	var uaQuotaItemViewMap=view.get(&quot;#uaQuotaItemViewMap&quot;);	&#xD;
	uaQuotaItemViewMap.execute({&#xD;
		callback:function(success,obj){&#xD;
			if (success) {&#xD;
				dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
				dgQuotaItemViewMap.refresh();&#xD;
			}else{&#xD;
				
			}&#xD;
		}&#xD;
	})&#xD;
}&#xD;
else {&#xD;
	message = &quot;未选中指标！&quot;;&#xD;
	dorado.MessageBox.alert(message);&#xD;
}</ClientEvent>
                      <Property name="caption">将勾选的指标设为可见</Property>
                      <Property name="icon">url(>skin>common/icons.gif) -20px 0px</Property>
                    </ToolBarButton>
                    <ToolBarButton>
                      <ClientEvent name="onClick">var data=view.get(&quot;#dsQuotaItemCreatorForSelect&quot;).getData();&#xD;
var dialog=view.get(&quot;#dlgQuotaItemCreatorForSelect&quot;);&#xD;
dorado.MessageBox.confirm(&quot;您真的要取消当前操作吗？&quot;,function(){&#xD;
	data.cancel();&#xD;
	dialog.hide();&#xD;
});</ClientEvent>
                      <Property name="caption">取消</Property>
                      <Property name="icon">url(>skin>common/icons.gif) -40px 0px</Property>
                    </ToolBarButton>
                  </ToolBar>
                  <DataGrid id="dgQuotaItemCreatorForSelect">
                    <ClientEvent name="onContextMenu">var muAddCanViewMaps1=view.get(&quot;#muAddCanViewMaps1&quot;);&#xD;
muAddCanViewMaps1.show(&#xD;
	{&#xD;
		position:{&#xD;
			left:arg.event.pageX,&#xD;
			top:arg.event.pageY&#xD;
		}&#xD;
	}&#xD;
);</ClientEvent>
                    <Property name="dataSet">dsQuotaItemCreatorForSelect</Property>
                    <Property name="dataType">QuotaItemCreator</Property>
                    <Property name="selectionMode">multiRows</Property>
                    <Property name="dynaRowHeight">true</Property>
                    <Property name="readOnly">true</Property>
                    <Property name="stretchColumnsMode">allColumns</Property>
                    <Property name="filterMode">serverSide</Property>
                    <RowNumColumn/>
                    <RowSelectorColumn/>
                    <DataColumn name="id">
                      <Property name="property">id</Property>
                      <Property name="visible">false</Property>
                      <Property name="readOnly">true</Property>
                    </DataColumn>
                    <DataColumn name="name">
                      <Property name="property">name</Property>
                      <Property name="visible">false</Property>
                      <Property name="readOnly">true</Property>
                    </DataColumn>
                    <DataColumn name="year">
                      <Property name="property">year</Property>
                      <Property name="visible">false</Property>
                      <Property name="readOnly">true</Property>
                    </DataColumn>
                    <DataColumn name="quotaType">
                      <Property name="property">quotaType</Property>
                      <Property name="editable">false</Property>
                      <Property name="wrappable">true</Property>
                      <Property name="caption">指标种类</Property>
                      <Property name="readOnly">true</Property>
                      <Property name="width">220</Property>
                      <Property name="visible">false</Property>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaType.name</Property>
                      <Property name="caption">指标</Property>
                      <Property name="align">center</Property>
                      <Property name="width">200</Property>
                      <Property name="editable">true</Property>
                      <Property name="name">quotaTypeName</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn>
                      <Property name="name">quotaProfessionName</Property>
                      <Property name="property">quotaType.quotaProfession.name</Property>
                      <Property name="align">center</Property>
                      <Property name="caption">专业</Property>
                      <Property name="readOnly">true</Property>
                      <Property name="width">100</Property>
                      <Property name="editable">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaType.manageDept.name</Property>
                      <Property name="caption">管理部门</Property>
                      <Property name="align">center</Property>
                      <Property name="width">100</Property>
                      <Property name="editable">true</Property>
                      <Property name="name">manageDeptName</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn name="quotaDutyDept">
                      <Property name="property">quotaDutyDept</Property>
                      <Property name="visible">false</Property>
                      <Property name="readOnly">true</Property>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaDutyDept.name</Property>
                      <Property name="caption">责任部门</Property>
                      <Property name="align">center</Property>
                      <Property name="width">100</Property>
                      <Property name="editable">true</Property>
                      <Property name="name">quotaDutyDeptName</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaType.quotaLevel.name</Property>
                      <Property name="caption">级别</Property>
                      <Property name="align">center</Property>
                      <Property name="width">60</Property>
                      <Property name="editable">true</Property>
                      <Property name="name">quotaTypeLevelName</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaType.rate</Property>
                      <Property name="caption">频率</Property>
                      <Property name="align">center</Property>
                      <Property name="width">60</Property>
                      <Property name="editable">true</Property>
                      <Property name="name">rate</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                    <DataColumn name="quotaCover">
                      <Property name="property">quotaCover</Property>
                      <Property name="editable">false</Property>
                      <Property name="align">center</Property>
                      <Property name="caption">口径</Property>
                      <Property name="readOnly">true</Property>
                      <Property name="width">65</Property>
                      <Property name="visible">false</Property>
                    </DataColumn>
                    <DataColumn>
                      <Property name="property">quotaCover.name</Property>
                      <Property name="caption">口径</Property>
                      <Property name="align">center</Property>
                      <Property name="width">65</Property>
                      <Property name="name">quotaCoverName</Property>
                      <Property name="editable">true</Property>
                      <Property name="readOnly">true</Property>
                      <Editor/>
                    </DataColumn>
                  </DataGrid>
                  <Menu id="muAddCanViewMaps1">
                    <MenuItem>
                      <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var dialog=view.get(&quot;#dlgQuotaItemCreatorForSelect&quot;);&#xD;
var aaAddQuotaItemViewMapsCanView=view.get(&quot;#aaAddQuotaItemViewMapsCanView&quot;);&#xD;
&#xD;
aaAddQuotaItemViewMapsCanView.set(&quot;parameter&quot;,{userId:userId});&#xD;
aaAddQuotaItemViewMapsCanView.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			dialog.hide();&#xD;
			var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
			dgQuotaItemViewMap.refresh();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
                      <Property name="caption">设置当前筛选出的指标为可见</Property>
                      <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
                    </MenuItem>
                  </Menu>
                  <AjaxAction id="aaAddQuotaItemViewMapsCanView">
                    <Property name="service">quotaItemViewMapDao#addQuotaItemViewMapsCanView</Property>
                  </AjaxAction>
                </Container>
              </Children>
              <Tools/>
            </Dialog>
          </Container>
        </MainControl>
        <SideControl>
          <Container>
            <SplitPanel>
              <Property name="position">50%</Property>
              <MainControl>
                <DataGrid id="dgUser">
                  <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();</ClientEvent>
                  <ClientEvent name="onContextMenu">var muInitViewMap2=view.get(&quot;#muInitViewMap2&quot;);&#xD;
muInitViewMap2.show(&#xD;
	{&#xD;
		position:{&#xD;
			left:arg.event.pageX,&#xD;
			top:arg.event.pageY&#xD;
		}&#xD;
	}&#xD;
);</ClientEvent>
                  <Property name="dataSet">dsUser</Property>
                  <Property name="allowNoCurrent">false</Property>
                  <Property name="dataType">User</Property>
                  <Property name="readOnly">true</Property>
                  <Property name="showHeader">true</Property>
                  <Property name="showFilterBar">false</Property>
                  <DataColumn name="username">
                    <Property name="property">username</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="password">
                    <Property name="property">password</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="salt">
                    <Property name="property">salt</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn>
                    <Property name="property">cname</Property>
                    <Property name="name">cname</Property>
                    <Property name="caption">人员</Property>
                    <Property name="align">center</Property>
                    <Editor/>
                  </DataColumn>
                  <DataColumn name="ename">
                    <Property name="property">ename</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="male">
                    <Property name="property">male</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="enabled">
                    <Property name="property">enabled</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="administrator">
                    <Property name="property">administrator</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="birthday">
                    <Property name="property">birthday</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="mobile">
                    <Property name="property">mobile</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="address">
                    <Property name="property">address</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="email">
                    <Property name="property">email</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="companyId">
                    <Property name="property">companyId</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="createDate">
                    <Property name="property">createDate</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                </DataGrid>
              </MainControl>
              <SideControl>
                <DataTree id="dtrDepartment">
                  <ClientEvent name="onClick">var dtrDepartment=view.get(&quot;#dtrDepartment&quot;);&#xD;
var currentDepartment=dtrDepartment.get(&quot;currentEntity&quot;);&#xD;
deptId=currentDepartment.get(&quot;id&quot;);&#xD;
var dsUser=view.get(&quot;#dsUser&quot;);&#xD;
&#xD;
dsUser.set(&quot;parameter&quot;,{deptId:deptId}).flushAsync();&#xD;
&#xD;
var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:null}).flushAsync();</ClientEvent>
                  <ClientEvent name="onContextMenu">var muInitViewMap1=view.get(&quot;#muInitViewMap1&quot;);&#xD;
muInitViewMap1.show(&#xD;
	{&#xD;
		position:{&#xD;
			left:arg.event.pageX,&#xD;
			top:arg.event.pageY&#xD;
		}&#xD;
	}&#xD;
);&#xD;
</ClientEvent>
                  <Property name="allowNoCurrent">true</Property>
                  <Property name="dataSet">dsDepartment</Property>
                  <BindingConfigs>
                    <BindingConfig>
                      <Property name="icon">url(>skin>common/icons.gif) -0px -20px</Property>
                      <Property name="name">department</Property>
                      <Property name="labelProperty">name</Property>
                    </BindingConfig>
                  </BindingConfigs>
                </DataTree>
              </SideControl>
            </SplitPanel>
          </Container>
        </SideControl>
      </SplitPanel>
      <Menu id="muInitViewMap1">
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByAll=view.get(&quot;#aaInitQuotaItemViewMapsByAll&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByAll.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（全部）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByDept=view.get(&quot;#aaInitQuotaItemViewMapsByDept&quot;);&#xD;
var dtrDepartment=view.get(&quot;#dtrDepartment&quot;);&#xD;
var currentDepartment=dtrDepartment.get(&quot;currentEntity&quot;);&#xD;
deptId=currentDepartment.get(&quot;id&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByDept.set(&quot;parameter&quot;,{deptId:deptId});&#xD;
aaInitQuotaItemViewMapsByDept.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（按部门）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <Separator/>
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByAllWithAll=view.get(&quot;#aaInitQuotaItemViewMapsByAllWithAll&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByAllWithAll.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（全部-全局指标可见）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByDeptWithAll=view.get(&quot;#aaInitQuotaItemViewMapsByDeptWithAll&quot;);&#xD;
var dtrDepartment=view.get(&quot;#dtrDepartment&quot;);&#xD;
var currentDepartment=dtrDepartment.get(&quot;currentEntity&quot;);&#xD;
deptId=currentDepartment.get(&quot;id&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByDeptWithAll.set(&quot;parameter&quot;,{deptId:deptId});&#xD;
aaInitQuotaItemViewMapsByDeptWithAll.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（按部门-全局指标可见）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
      </Menu>
      <Menu id="muInitViewMap2">
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByUser=view.get(&quot;#aaInitQuotaItemViewMapsByUser&quot;);&#xD;
var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByUser.set(&quot;parameter&quot;,{userId:userId});&#xD;
aaInitQuotaItemViewMapsByUser.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（按用户）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <Separator/>
        <MenuItem>
          <ClientEvent name="onClick">var aaInitQuotaItemViewMapsByUserWithAll=view.get(&quot;#aaInitQuotaItemViewMapsByUserWithAll&quot;);&#xD;
var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
aaInitQuotaItemViewMapsByUserWithAll.set(&quot;parameter&quot;,{userId:userId});&#xD;
aaInitQuotaItemViewMapsByUserWithAll.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">初始化查看范围（按用户-全局指标可见）</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
      </Menu>
      <Menu id="muUpdateViewMaps1">
        <MenuItem>
          <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var aaUpdateQuotaItemViewMapsDefaultView=view.get(&quot;#aaUpdateQuotaItemViewMapsDefaultView&quot;);&#xD;
&#xD;
aaUpdateQuotaItemViewMapsDefaultView.set(&quot;parameter&quot;,{userId:userId,isDefaultToView:true});&#xD;
aaUpdateQuotaItemViewMapsDefaultView.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
			dgQuotaItemViewMap.refresh();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">设置当前筛选出的指标为默认</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <MenuItem>
          <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var aaUpdateQuotaItemViewMapsDefaultView=view.get(&quot;#aaUpdateQuotaItemViewMapsDefaultView&quot;);&#xD;
&#xD;
aaUpdateQuotaItemViewMapsDefaultView.set(&quot;parameter&quot;,{userId:userId,isDefaultToView:false});&#xD;
aaUpdateQuotaItemViewMapsDefaultView.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
			dgQuotaItemViewMap.refresh();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">设置当前筛选出的指标为不默认</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
        <MenuItem>
          <ClientEvent name="onClick">var dgUser=view.get(&quot;#dgUser&quot;);&#xD;
var currentUser=dgUser.getCurrentItem();&#xD;
userId=currentUser.get(&quot;username&quot;);&#xD;
&#xD;
var aaUpdateQuotaItemViewMapsCanView=view.get(&quot;#aaUpdateQuotaItemViewMapsCanView&quot;);&#xD;
&#xD;
aaUpdateQuotaItemViewMapsCanView.set(&quot;parameter&quot;,{userId:userId,isCanView:false});&#xD;
aaUpdateQuotaItemViewMapsCanView.execute({&#xD;
	callback : function(success, obj){&#xD;
		if (success) {&#xD;
			var dgQuotaItemViewMap=view.get(&quot;#dgQuotaItemViewMap&quot;);&#xD;
			var dsQuotaItemViewMap=view.get(&quot;#dsQuotaItemViewMap&quot;);&#xD;
			&#xD;
			dsQuotaItemViewMap.set(&quot;parameter&quot;,{userId:userId}).flushAsync();&#xD;
			dgQuotaItemViewMap.refresh();&#xD;
        }&#xD;
		else{}}&#xD;
});</ClientEvent>
          <Property name="caption">设置当前筛选出的指标为不可见</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -100px</Property>
        </MenuItem>
      </Menu>
    </Container>
    <AjaxAction id="aaInitQuotaItemViewMapsByAll">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByAll</Property>
    </AjaxAction>
    <AjaxAction id="aaInitQuotaItemViewMapsByDept">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByDept</Property>
    </AjaxAction>
    <AjaxAction id="aaInitQuotaItemViewMapsByUser">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByUser</Property>
    </AjaxAction>
    <AjaxAction id="aaInitQuotaItemViewMapsByUserWithAll">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByUserWithAll</Property>
    </AjaxAction>
    <AjaxAction id="aaInitQuotaItemViewMapsByDeptWithAll">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByDeptWithAll</Property>
    </AjaxAction>
    <AjaxAction id="aaInitQuotaItemViewMapsByAllWithAll">
      <Property name="service">quotaItemViewMapDao#initQuotaItemViewMapsByAllWithAll</Property>
    </AjaxAction>
    <AjaxAction id="aaUpdateQuotaItemViewMapsDefaultView">
      <Property name="service">quotaItemViewMapDao#updateQuotaItemViewMapsDefaultView</Property>
    </AjaxAction>
    <AjaxAction id="aaUpdateQuotaItemViewMapsCanView">
      <Property name="service">quotaItemViewMapDao#updateQuotaItemViewMapsCanView</Property>
    </AjaxAction>
  </View>
</ViewConfig>
